# Item 26: 변수 정의는 늦출 수 있는 데까지 늦추는 근성을 발휘하자

생성자 혹은 소멸자를 끌고 다니는 타입으로 변수를 정의하면 반드시 물게 되는 비용

1. 프로그램 제어 흐름이 변수의 정의에 닿을 때 생성자가 호출되는 비용
2. 변수가 유효범위를 벗어날 때 소멸자가 호출되는 비용

변수가 정의되었으나 사용되지 않은 경우에도 비용이 부과됨

---

변수를 정의하는 일은 꼭 필요해지기 전까지로 미루는 편이 좋음

객체를 기본 생성하고 나서 값을 대입하는 방법은 원하는 값으로 직접 초기화하는 방법보다 효율이 좋지 않음 → Item 4 참고

의미 없는 기본 생성자 호출을 건너뛰어야 함

변수를 정의함과 동시에 초기화

---

어떤 변수를 사용해야 할 때가 오기 전까지 그 변수의 정의를 늦춰야 함

초기화 인자를 손에 넣기 전까지 정의를 늦출 수 있는지 둘러봐야 함

이렇게 해야 쓰지도 않을 객체가 만들어졌다 없어지는 일이 생기지 않음

불필요한 기본 생성자 호출도 일어나지 않음

변수의 쓰임새를 문서화하는 데도 큰 도움이 됨

---

어떤 변수가 루프 안에서만 쓰이는 경우 어떤 구조가 좋을까?

```c++
// A 방법: 루프 바깥쪽에 정의
Widget w;
for (int i = 0; i < n; ++i) {
    w = i에 따라 달라지는 값;
    ...
}

// B 방법: 루프 안쪽에 정의
for (int i = 0; i < n; ++i) {
    Widget w(i에 따라 달라지는 값);
    ...
}
```

Widget 객체에 들어가는 연산을 기준으로 해서 두 방법에 걸리는 비용

- A 방법: 생성자 1번 + 소멸자 1번 + 대입 n번
- B 방법: 생성자 n번 + 소멸자 n번

대입에 들어가는 비용이 생성자·소멸자 쌍보다 적게 나오는 경우 A 방법이 일반적으로 훨씬 효율이 좋음. 이 차이는 n이 커질 때 특히 더 커짐

그렇지 않은 경우 B 방법이 더 좋을 것임

A 방법을 쓰면 w의 유효범위가 B 방법을 쓸 때보다 넓어지기 때문에 프로그램의 이해도와 유지보수성이 역으로 안 좋아질 수도 있음

대입이 생성자·소멸자 쌍보다 비용이 덜 들고, 전체 코드에서 수행 성능에 민감한 부분을 건드리는 중이라고 생각하지 않는다면, B 방법으로 가는 것이 좋음

---

**변수 정의는 늦출 수 있을 때까지 늦추자. 프로그램이 더 깔끔해지며 효율도 좋아짐**

